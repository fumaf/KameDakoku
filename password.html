<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
  </head>
  <script type="text/javascript">

    function button_click(value) {
      var target = document.getElementById("searchLink");
      var tes1 = document.getElementById("first") 
      var tes2 = document.getElementById("second")
      var tes3 = document.getElementById("third")
      var tes4 = document.getElementById("fourth")
      var psss = tes1.value + tes2.value + tes3.value + tes4.value;
      target.innerText = psss;
      if (value == psss) {
        target.href = "<?= getAppUrl() ?>?page=set&name=<?= name ?>&password=<?= password ?>";
      }else{
        target.innerText = "ちゃう";
        tes1.value = ""
        tes2.value = ""
        tes3.value = ""
        tes4.value = ""
        first.focus();
      }
    }

    const outFocus = () => {
    // focusがあたっている要素を取得
    const elem = document.activeElement;
    // 1文字入力したらフォーカスを外す
    if(elem.value.length >= 1) {
      elem.blur();
    }
  }
    const secondFocus = () => {
      var target = document.getElementById("searchLink");
      second.focus();
    }

    const thirdFocus = () => {
      var target = document.getElementById("searchLink");
      third.focus();
    }

  const fourthFocus = () => {
      var target = document.getElementById("searchLink");
      fourth.focus();
    }
  </script>
  <body>
  <div><?= name ?></div>
  <!-- cssで他のものをさわれなくする -->
  <input id="first" maxlength="1" inputmode="tel" onkeyup="outFocus()" onblur="secondFocus()"/>
  <input id="second" maxlength="1" inputmode="tel" onkeyup="outFocus()"onblur="thirdFocus()"/>
  <input id="third" maxlength="1" inputmode="tel" onkeyup="outFocus()"onblur="fourthFocus()"/>
  <input id="fourth" maxlength="1" inputmode="tel" onkeyup="button_click(<?= password ?>);" onkeyup="outFocus()"/>

  <a id="searchLink" onclick="aaa(<?= password ?>)">ログイン</a>
  
</body>
</html>
